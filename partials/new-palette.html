<section class="container" ng-controller="ColorCtrl">
  
  <div class="row center">
    <div class="col s12 l6">
      <h1>Create</h1>
    </div>

    <div class="col s12 l6">
      <a href="#/edit-palette"><button class="waves-effect waves-light btn-large create-btn" ng-click="savePalette()">Save Palette</button></a>
    </div>
  </div>


  <!-- <h1>Create New Palette</h1>
  <button class="waves-effect waves-light btn" ng-click="savePalette()">Save Palette</button> -->
  <input type="text" ng-model="paletteName" placeholder="New Palette Name">

  <div class="row">
    <ul ui-sortable ng-model="colors">
      <li ng-class="colors.length > 3 ? (colors.length > 5 ? 's1-half' : 's2') : 's3'" class="card color-card col" id="{{color}}" ng-repeat="color in colors" style="background-color: {{color}}">
        <div class="activator card-image waves-effect waves-block waves-light">
        </div>
        <div class="card-content reset">
        <span class="card-title activator grey-text text-darken-4">
          <span ng-if="getLightness(color) > 50"><i class="material-icons right small">more_horiz</i></span>
          <span ng-if="getLightness(color) <= 50"><i class="material-icons right small white-icons">more_horiz</i></span>
        </span>
      </div>
      <div class="card-reveal">
        <span class="card-title grey-text text-darken-4">
          <i class="material-icons right">close</i></span>
          <a>Tweak</a>
          <a ng-click="deleteColor(color)">Delete</a>
          <a>Copy Hex</a> 
      </div>
      </li>
    </ul>
  </div>

  <div class="clear"></div>

  <h4 ng-if="saturationScale">Saturation Scale</h4>
    <ul ng-model="saturationScale">
      <li class="saturation-color" ng-click="add(color)" ng-repeat="color in saturationScale track by $index" style="background-color: {{color}}">
        {{color}}
      </li>
    </ul>

  <div class="clear"></div>

  <span ng-if="complimentaryColor">
    <h4>Complimentary Color</h4>
    <ul>
      <li class="color" ng-click="setColor(complimentaryColor)" ng-model="colorPicker" style="background-color: {{complimentaryColor}}">
        {{complimentaryColor}}
      </li>
    </ul>
  </span>

  <div class="clear"></div>

  <span ng-if="colorPicker !== '#ffffff'">
    <h4>Lightness Slider</h4>
    <form action="#">
      <p class="range-field">
        <input ng-model="$parent.pickerLightness" ng-change="setColor(calcFromLightness())" type="range" min="0" max="100" />
      </p>
    </form>
  </span>



  <span ng-if="clusterColors">
    <h4>Cluster Colors</h4>
    <ul>
      <li class="color cluster-color" ng-click="setColor(color); setLightness()" ng-repeat="color in clusterColors" style="background-color: {{color}}">
        {{color}}
      </li>
    </ul>
  </span>


    <div class="clear"></div>


 

    <div>
      <canvas id="imageCanvas" width=0 height=0></canvas>
    </div>
          
    <span ng-if="imageUploaded">
      <form action="#">
        <p class="range-field">
          <input ng-model="$parent.k" type="range" min="3" max="8" />
        </p>
      </form>
      <button ng-click="processImage()" class="waves-effect waves-light btn">Process</button>
    </span>


  <span ng-if="flickrLoader">
    <div ng-include="'partials/indeterminate-loader'"></div>
  </span>

  <ul class="collapsible" data-collapsible="accordion">
    <li>
      <div class="collapsible-header"><i class="material-icons">colorize</i>Color Picker</div>
      <div class="collapsible-body">
        <div class="valign-wrapper">
          <input type="color" ng-model="colorPicker" ng-change="updateScales(); compliment(); setLightness()"/>
          <button ng-click="add(colorPicker)" class="waves-effect waves-light btn">Add to Palette</button>
        </div>
      </div>
    </li>
    <li>
      <div class="collapsible-header"><i class="material-icons">add_a_photo</i>Upload Image</div>
      <div class="collapsible-body">
        <form action="#">
          <div class="file-field input-field">
            <div class="btn">
              <span>File</span>
              <input type="file" id="imageLoader" name="imageLoader">
            </div>
            <div class="file-path-wrapper">
              <input class="file-path validate" type="text">
            </div>
          </div>
        </form>
      </div>
    </li>
    <li>
      <div class="collapsible-header"><i class="material-icons">search</i>Search Flickr</div>
      <div class="collapsible-body">
        <p>
          <input type="text" ng-model="searchTerm" placeholder="Search Flickr...">
          <button ng-click="flickrSearch()" class="waves-effect waves-light btn">Search</button>
        </p>
      </div>
    </li>
  </ul>

  <span ng-if="flickrLoader">
    <div ng-include="'partials/indeterminate-loader'"></div>
  </span>



  <!-- <h6>Add from Color Picker</h6>
  <input type="color" ng-model="colorPicker" ng-change="updateScales(); compliment(); setLightness()"/>
  <button ng-click="add(colorPicker)" class="waves-effect waves-light btn">Add to Palette</button> -->



<!--   <h6>Search Flickr</h6>
  <input type="text" ng-model="searchTerm" placeholder="Search Flickr...">
  <button ng-click="flickrSearch()" class="waves-effect waves-light btn">Search</button>
  
  <span ng-if="flickrLoader">
    <div ng-include="'partials/indeterminate-loader'"></div>
  </span>

  
  <div class="clear"></div>
 -->
<!--   <h6>Upload Image</h6>
  <form action="#">
    <div class="file-field input-field">
      <div class="btn">
        <span>File</span>
        <input type="file" id="imageLoader" name="imageLoader">
      </div>
      <div class="file-path-wrapper">
        <input class="file-path validate" type="text">
      </div>
    </div>
  </form>
-->

<!--   <div class="clear"></div>
 

  <div>
    <canvas id="imageCanvas" width=0 height=0></canvas>
  </div>
        
  <span ng-if="imageUploaded">
    <form action="#">
      <p class="range-field">
        <input ng-model="$parent.k" type="range" min="3" max="8" />
      </p>
    </form>
    <button ng-click="processImage()" class="waves-effect waves-light btn">Process</button>
  </span> -->

  <div class="clear"></div>

  <!-- display images from flickr search -->
<div class="search-results" id="searchResults">
  <span ng-if="searchImgResults">
    <h4>Search Results</h4>
    <h6>Click an image to extract a palette from</h6>
  </span>
  <span ng-repeat="imgSrc in searchImgResults">
    <img ng-click="analyze(imgSrc); scrollTo('imageCanvas')" ng-src="{{imgSrc}}">
  </span>
</div>



  <div ng-include="'partials/save-modal.html'"></div>

</section>